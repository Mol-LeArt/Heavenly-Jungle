{"ast":null,"code":"var _jsxFileName = \"/home/danielo/Development/ui/dashboardV1/src/expMinter.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport Mint from './Mint';\nimport ImageUpload from './ImageUpload';\nimport { GlobalContext } from './GlobalContext';\nimport { DefaultButton, PrimaryButton, DangerButton, BrandButton } from 'pivotal-ui/react/buttons';\nimport moralis from \"moralis\";\nimport { ethers } from 'ethers';\nimport axios from 'axios';\nimport MOLCOMMONS_ABI from './MOLCOMMONS_ABI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmoralis.initialize(process.env.REACT_APP_MORALIS_APPLICATION_ID);\nmoralis.serverURL = process.env.REACT_APP_MORALIS_SERVER_URL;\n\nconst MintNFT = () => {\n  _s();\n\n  // ----- useState\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [sale, setSale] = useState('');\n  const [ethPrice, setEthPrice] = useState('');\n  const [coinPrice, setCoinPrice] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [compliance, setCompliance] = useState(false);\n  const [metadata, setMetadata] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [chain, setChain] = useState('');\n  const initialUser = moralis.User.current();\n  const [user, setUser] = useState(initialUser);\n  const [connect, toggleConnect] = useState(false);\n  const [imageHash, setImageHash] = useState('');\n  const [imageUrl, setImageUrl] = useState('profile.jpg');\n  const [commonsAddress, setCommonsAddress] = useState('');\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const Commons = moralis.Object.extend(\"Commons\", {\n    /* Instance methods*/\n  }, {\n    newCommons: function () {\n      const commons = new Commons();\n      commons.set(\"name\", document.getElementById('commonsname').value);\n      commons.set(\"vaultsymbol\", document.getElementById('vaultsymbol').value);\n      commons.set(\"organizer\", document.getElementById('organizer0').value);\n      commons.set(\"vaultname\", document.getElementById('vaultname').value);\n      commons.set(\"confirmations\", document.getElementById('confirmations').value);\n      alert('tfer ' + document.getElementById('transferrable').checked + '');\n      commons.set(\"transferrable\", document.getElementById('transferrable').checked + '');\n      var radios = document.getElementsByName('radio-group');\n\n      for (var i = 0; i < radios.length; i++) {\n        if (radios[i].checked) {\n          commons.set(\"use\", radios[i].value); //        alert( 'elements ' + i + ' ' + radios[i].checked );\n        }\n      }\n\n      return commons;\n    }\n  }); //window.addEventListener( 'load', async function() {  if (user) { await getNetwork(); setUser(user); setAccount(user.get(\"ethAddress\") ); } }) ;\n\n  const signer = provider.getSigner();\n\n  const onLogin = async () => {\n    await getNetwork();\n    const user = await moralis.authenticate();\n    setUser(user);\n    setAccount(user.get(\"ethAddress\"));\n  }; //On file select (from the pop up)\n\n\n  const onFileChange = event => {\n    // Update the state\n    setImageFile(event.target.files[0]);\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (compliance) {\n      const nft = {\n        account: account,\n        title: title,\n        description: description,\n        compliance: compliance\n      };\n      setMetadata(nft);\n      doMint();\n    } else {\n      alert('You must accept!');\n    }\n  };\n\n  const doMint = async () => {\n    const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n    let data = new FormData();\n    data.append(\"file\", imageFile, imageFile.name);\n    const res = await axios.post(url, data, {\n      maxContentLength: \"Infinity\",\n      headers: {\n        \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\n        pinata_api_key: process.env.REACT_APP_PINATA_PUBLIC,\n        pinata_secret_api_key: process.env.REACT_APP_PINATA_PRIVATE\n      }\n    });\n    console.log(res.data);\n    setImageHash(res.data.IpfsHash);\n    setImageUrl('https://gateway.pinata.cloud/ipfs/' + res.data.IpfsHash);\n\n    try {\n      uploadAndMint(res.data.IpfsHash);\n    } catch (e) {\n      console.log('error is - ' + e);\n    }\n  }; // ----- Upload tokenURI and Mint NFT\n\n\n  const uploadAndMint = async hash => {\n    alert('get commons ');\n    await getCommons();\n    alert('get commons ' + commonsAddress);\n    const baseUrl = 'https://ipfs.io/ipfs/'; // Add timestamp to metadata\n\n    const date = new Date();\n    const timestamp = date.getTime();\n    const dict = { ...metadata,\n      image: baseUrl + hash,\n      createdAt: timestamp\n    };\n    console.log('tokenURI at mint is - ', dict);\n    alert('tokenURI at mint is - ', dict);\n    /*  const data = JSON.stringify(dict)\n      const i = {\n        apiKey: process.env.REACT_APP_FLEEK_API_KEY,\n        apiSecret: process.env.REACT_APP_FLEEK_API_SECRET,\n        bucket: 'audsssy-team-bucket',\n        key: hash,\n        data,\n      }\n    */\n\n    try {\n      // Uplaod tokenUri to Fleek\n      //    const result = await fleek.upload(i)\n      //    console.log('this is tokenUri hash from fleek - ' + result.hash)\n      // Mint NFT\n      const tokenUri = baseUrl + hash;\n      console.log(tokenUri);\n      const p = ethers.utils.parseEther(ethPrice);\n      const c = ethers.utils.parseEther(coinPrice);\n      molCommons(p, c, tokenUri, getCommons);\n    } catch (e) {\n      console.log('error is - ' + e);\n    }\n  };\n\n  const getCommons = async () => {\n    var commonsId = window.location.search.substring(11);\n    const query = new moralis.Query(Commons);\n    query.equalTo(\"objectId\", commonsId);\n    const results = await query.find();\n    var commonsObject;\n\n    for (let i = 0; i < results.length; i++) // wtf??? only expecting one result. gotta find acceptable solution for this\n    {\n      const object = results[i];\n      commonsObject = object;\n      setCommonsAddress(object.get('contractaddress'));\n      alert('commons ' + object.get('contractaddress'));\n    }\n\n    return object.get('contractaddress');\n  }; // ----- Mint Gamma with MolVault\n\n\n  const molCommons = async (price, coins, tokenURI, commonsContractAddress) => {\n    console.log('MolVault contract is - ', commonsContractAddress);\n\n    const _contract = new ethers.Contract(commonsContractAddress, MOLCOMMONS_ABI, signer);\n\n    try {\n      const tx = await _contract.mint(price, coins, tokenURI, sale);\n      console.log('tx.hash for minting - ' + tx.hash);\n      tx.wait().then(receipt => {\n        if (receipt.confirmations === 1) {\n          console.log('mint receipt is - ', receipt); // history.push(`/community`)\n          // Store user address to Firestore\n          //addMinterToCoinHolders()\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const getNetwork = () => {\n    provider.getNetwork().then(network => {\n      console.log('current chainId - ' + network.chainId);\n\n      if (network.chainId === 100) {\n        setChain('xDAI');\n        toggleConnect(true);\n      } else if (network.chainId === 4) {\n        setChain('Rinkeby');\n        toggleConnect(true);\n      } else if (network.chainId === 1) {\n        setChain('Mainnet');\n        toggleConnect(true);\n      } else if (network.chainId === 3) {\n        setChain('Ropsten');\n        toggleConnect(true);\n      } else if (network.chainId === 42) {\n        setChain('Kovan');\n        toggleConnect(true);\n      } else {\n        console.log('Pick a supported blockchain!');\n      }\n    }).catch(err => {\n      alert('err ' + err);\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"mx-auto px-4 my-10 max-w-sm space-y-10 font-mono\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"text-5xl font-bold text-center\",\n      children: \"Mint NFT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n      onClick: onLogin,\n      children: account + ' - ' + chain\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      class: \"space-y-4\",\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900\",\n          type: \"text\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          placeholder: \"Enter Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm\",\n          type: \"text\",\n          value: description,\n          onChange: e => setDescription(e.target.value),\n          placeholder: \"Enter Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"sale\",\n          children: \"Put on sale?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm\",\n          type: \"text\",\n          value: sale,\n          onChange: e => setSale(e.target.value),\n          placeholder: \"Yes = 1, no = 0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"price\",\n          children: \"Price in \\u039E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm\",\n          type: \"text\",\n          value: ethPrice,\n          onChange: e => setEthPrice(e.target.value),\n          placeholder: \"Enter amount in \\u039E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"coins\",\n          children: \"No. of Coins\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm\",\n          type: \"text\",\n          value: coinPrice,\n          onChange: e => setCoinPrice(e.target.value),\n          placeholder: \"Enter amount in coins\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: onFileChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flex justify-center items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"Checkbox\",\n          checked: compliance,\n          onChange: e => setCompliance(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"I agree to XYZ.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flex justify-center\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"py-2 px-4 text-white bg-gray-800 hover:bg-gray-500 w-max rounded-md\",\n          children: \"Mint\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MintNFT, \"hge4CQg/I5QrwRI3UF4DF1kKvsk=\");\n\n_c = MintNFT;\nexport default MintNFT;\n\nvar _c;\n\n$RefreshReg$(_c, \"MintNFT\");","map":{"version":3,"sources":["/home/danielo/Development/ui/dashboardV1/src/expMinter.js"],"names":["React","useState","useContext","Mint","ImageUpload","GlobalContext","DefaultButton","PrimaryButton","DangerButton","BrandButton","moralis","ethers","axios","MOLCOMMONS_ABI","initialize","process","env","REACT_APP_MORALIS_APPLICATION_ID","serverURL","REACT_APP_MORALIS_SERVER_URL","MintNFT","title","setTitle","description","setDescription","sale","setSale","ethPrice","setEthPrice","coinPrice","setCoinPrice","imageFile","setImageFile","compliance","setCompliance","metadata","setMetadata","account","setAccount","chain","setChain","initialUser","User","current","user","setUser","connect","toggleConnect","imageHash","setImageHash","imageUrl","setImageUrl","commonsAddress","setCommonsAddress","provider","providers","Web3Provider","window","ethereum","Commons","Object","extend","newCommons","commons","set","document","getElementById","value","alert","checked","radios","getElementsByName","i","length","signer","getSigner","onLogin","getNetwork","authenticate","get","onFileChange","event","target","files","onSubmit","e","preventDefault","nft","doMint","url","data","FormData","append","name","res","post","maxContentLength","headers","_boundary","pinata_api_key","REACT_APP_PINATA_PUBLIC","pinata_secret_api_key","REACT_APP_PINATA_PRIVATE","console","log","IpfsHash","uploadAndMint","hash","getCommons","baseUrl","date","Date","timestamp","getTime","dict","image","createdAt","tokenUri","p","utils","parseEther","c","molCommons","commonsId","location","search","substring","query","Query","equalTo","results","find","commonsObject","object","price","coins","tokenURI","commonsContractAddress","_contract","Contract","tx","mint","wait","then","receipt","confirmations","network","chainId","catch","err"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\nimport Mint from './Mint'\nimport ImageUpload from './ImageUpload'\nimport { GlobalContext } from './GlobalContext'\nimport {DefaultButton, PrimaryButton, DangerButton, BrandButton} from 'pivotal-ui/react/buttons';\nimport moralis from \"moralis\";\nimport { ethers } from 'ethers'\nimport axios from 'axios';\nimport MOLCOMMONS_ABI from './MOLCOMMONS_ABI'\n\nmoralis.initialize(process.env.REACT_APP_MORALIS_APPLICATION_ID);\nmoralis.serverURL = process.env.REACT_APP_MORALIS_SERVER_URL;\n\nconst MintNFT = () => {\n  // ----- useState\n  const [title, setTitle] = useState('')\n  const [description, setDescription] = useState('')\n  const [sale, setSale] = useState('')\n  const [ethPrice, setEthPrice] = useState('')\n  const [coinPrice, setCoinPrice] = useState('')\n  const [imageFile, setImageFile] = useState(null)\n  const [compliance, setCompliance] = useState(false)\n  const [metadata, setMetadata] = useState(null)\n  const [account, setAccount] = useState(null)\n  const [chain, setChain] = useState('')\n  const initialUser = moralis.User.current()\n  const [user, setUser] = useState(initialUser)\n  const [connect, toggleConnect] = useState(false)\n  const [imageHash, setImageHash] = useState('');\n  const [imageUrl, setImageUrl] = useState('profile.jpg');\n  const [commonsAddress, setCommonsAddress] = useState(''); \n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n\nconst Commons = moralis.Object.extend( \"Commons\", { /* Instance methods*/ }, \n        {  \n            newCommons: function() { \n                                        const commons = new Commons();\n                                        commons.set( \"name\",            document.getElementById( 'commonsname'     ).value  );\n                                        commons.set( \"vaultsymbol\",     document.getElementById( 'vaultsymbol'     ).value  );\n                                        commons.set( \"organizer\",       document.getElementById( 'organizer0'       ).value  ); \n                                        commons.set( \"vaultname\",       document.getElementById( 'vaultname'       ).value  ); \n                                        commons.set( \"confirmations\",   document.getElementById( 'confirmations'   ).value  );\n                                        alert( 'tfer ' + document.getElementById( 'transferrable'   ).checked + '' );\n                                        commons.set( \"transferrable\",   document.getElementById( 'transferrable'   ).checked + '' );\n                                       \n                                        var radios = document.getElementsByName( 'radio-group'   );                                 \n                                        for (var i = 0; i < radios.length; i++) \n                                        {\n                                            if ( radios[i].checked )\n                                            {\n                                               commons.set( \"use\",     radios[i].value  );\n                                       //        alert( 'elements ' + i + ' ' + radios[i].checked );\n                                            }\n                                        }\n                                        return commons; \n                                    }\n        });\n\n //window.addEventListener( 'load', async function() {  if (user) { await getNetwork(); setUser(user); setAccount(user.get(\"ethAddress\") ); } }) ;\n\n\n  const signer = provider.getSigner()\n\n  const onLogin = async () => { await getNetwork(); const user = await moralis.authenticate(); setUser(user); setAccount(user.get(\"ethAddress\") ); };\n\n\n\n//On file select (from the pop up)\n\tconst onFileChange = event => {\n\t\t// Update the state\n\t    setImageFile(event.target.files[0]);\n\t};\n\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    if (compliance) {\n      const nft = {\n        account: account,\n        title: title,\n        description: description,\n        compliance: compliance,\n      }\n      setMetadata(nft);\n      doMint();\n    } else {\n      alert('You must accept!')\n    }\n  }\n\n    const doMint = async () => {\n                                const url = `https://api.pinata.cloud/pinning/pinFileToIPFS`;\n                                let   data = new FormData();\n                                data.append(\"file\", imageFile, imageFile.name );\n                                const res = await axios.post(   url, data, {  maxContentLength: \"Infinity\", \n                                                                headers: { \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\n                                                                pinata_api_key: process.env.REACT_APP_PINATA_PUBLIC,\n                                                                pinata_secret_api_key: process.env.REACT_APP_PINATA_PRIVATE,            },   });\n                                console.log(res.data);\n                                setImageHash( res.data.IpfsHash );\n                                setImageUrl( 'https://gateway.pinata.cloud/ipfs/' + res.data.IpfsHash );\n\n\n                                try\n                                {           \n                                        uploadAndMint(res.data.IpfsHash)\n                                    } \n                                    catch (e) \n                                   { \n                                        console.log('error is - ' + e) \n                                   }\n  \n\n\n    }\n\n  // ----- Upload tokenURI and Mint NFT\n  const uploadAndMint = async (hash) => {\n                                                alert( 'get commons ' );\n                                                await getCommons();\n                                                alert( 'get commons ' + commonsAddress );\n                                                const baseUrl = 'https://ipfs.io/ipfs/'\n\n    // Add timestamp to metadata\n    const date = new Date()\n    const timestamp = date.getTime()\n    const dict = { ...metadata, image: baseUrl + hash, createdAt: timestamp }\n    console.log('tokenURI at mint is - ', dict)\n    alert('tokenURI at mint is - ', dict)\n\n  /*  const data = JSON.stringify(dict)\n    const i = {\n      apiKey: process.env.REACT_APP_FLEEK_API_KEY,\n      apiSecret: process.env.REACT_APP_FLEEK_API_SECRET,\n      bucket: 'audsssy-team-bucket',\n      key: hash,\n      data,\n    }\n*/\n    try {\n      // Uplaod tokenUri to Fleek\n  //    const result = await fleek.upload(i)\n  //    console.log('this is tokenUri hash from fleek - ' + result.hash)\n\n      // Mint NFT\n      const tokenUri = baseUrl + hash\n      console.log(tokenUri)\n      const p = ethers.utils.parseEther(ethPrice)\n      const c = ethers.utils.parseEther(coinPrice)\n      molCommons(p, c, tokenUri, getCommons)\n  \n    } catch (e) {\n      console.log('error is - ' + e )\n    }\n  }\n\n  const getCommons = async () =>\n                                        {\n                                            var commonsId =    window.location.search.substring( 11 );\n                                            const query = new moralis.Query( Commons );\n                                            query.equalTo( \"objectId\", commonsId );\n                                            const results = await query.find();\n                                            var commonsObject;\n                                            for ( let i = 0; i < results.length; i++ ) // wtf??? only expecting one result. gotta find acceptable solution for this\n                                            { \n                                                const object = results[i];\n                                                commonsObject = object;\n                                                setCommonsAddress( object.get('contractaddress') );\n                                                alert( 'commons '  + object.get('contractaddress') );\n                                            }\n                                            return object.get('contractaddress');\n                                        }\n\n\n // ----- Mint Gamma with MolVault\n  const molCommons = async (price, coins, tokenURI, commonsContractAddress) => {\n                                                            console.log('MolVault contract is - ', commonsContractAddress)\n                                                            const _contract = new ethers.Contract(commonsContractAddress, MOLCOMMONS_ABI, signer)\n                                                            try \n                                                            {\n                                                                const tx = await _contract.mint(price, coins, tokenURI, sale)\n                                                                console.log('tx.hash for minting - ' + tx.hash)\n\n                                                                tx.wait().then((receipt) => { \n                                                                                                if (receipt.confirmations === 1) {\n                                                                                                                                      console.log('mint receipt is - ', receipt)\n                                                                                                                                     // history.push(`/community`)\n                                                                                                                                      // Store user address to Firestore\n                                                                                                                                      //addMinterToCoinHolders()\n                                                                                                                                  }\n                                                                                             })\n                                                            } catch (e) {  console.log(e)  }\n                                                       }\n\nconst getNetwork = () => {\n    provider\n      .getNetwork()\n      .then((network) => {\n        console.log('current chainId - ' + network.chainId)\n        if (network.chainId === 100) {\n          setChain('xDAI')\n          toggleConnect(true)\n        } else if (network.chainId === 4) {\n          setChain('Rinkeby') \n          toggleConnect(true)\n        } else if (network.chainId === 1) {\n          setChain('Mainnet')\n          toggleConnect(true)\n        } else if (network.chainId === 3) {\n          setChain('Ropsten')\n          toggleConnect(true)\n        } else if (network.chainId === 42) {\n          setChain('Kovan')\n          toggleConnect(true)\n        } else {\n          console.log('Pick a supported blockchain!')\n        }\n      })\n      .catch((err) => {\n        alert( 'err ' + err );\n        console.log(err)\n      })\n  }\n\n\n  return (\n    <div class='mx-auto px-4 my-10 max-w-sm space-y-10 font-mono'>\n      <div class='text-5xl font-bold text-center'>Mint NFT</div>\n        <PrimaryButton onClick={onLogin} >{account + ' - ' + chain}</PrimaryButton>\n      <form class='space-y-4' onSubmit={onSubmit}>\n        <div>\n          <div>Title</div>\n          <input\n            class='border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900'\n            type='text'\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder='Enter Title'\n          />\n        </div>\n\n        <div>\n          <div>Description</div>\n          <input\n            class='border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm'\n            type='text'\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder='Enter Description'\n          />\n        </div>\n\n        <div>\n          <label htmlFor='sale'>Put on sale?</label>\n          <br />\n          <input\n            class='border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm'\n            type='text'\n            value={sale}\n            onChange={(e) => setSale(e.target.value)}\n            placeholder='Yes = 1, no = 0'\n          />\n        </div>\n\n        <div>\n          <label htmlFor='price'>Price in Ξ</label>\n          <br />\n          <input\n            class='border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm'\n            type='text'\n            value={ethPrice}\n            onChange={(e) => setEthPrice(e.target.value)}\n            placeholder='Enter amount in Ξ'\n          />\n        </div>\n\n        <div>\n          <label htmlFor='coins'>No. of Coins</label>\n          <br />\n          <input\n            class='border border-gray-400 py-2 px-4 w-full rounded focus:outline-none focus:border-gray-900 max-w-sm'\n            type='text'\n            value={coinPrice}\n            onChange={(e) => setCoinPrice(e.target.value)}\n            placeholder='Enter amount in coins'\n          />\n        </div>\n\n        <div>\n          <input type=\"file\" onChange={onFileChange} />\n        </div>\n\n        <div>\n            <img src={imageUrl} />\n        </div>\n\n        <div class='flex justify-center items-center space-x-2'>\n          <input\n            type='Checkbox'\n            checked={compliance}\n            onChange={(e) => setCompliance(e.target.checked)}\n          />\n          <span>I agree to XYZ.</span>\n        </div>\n\n        <div class='flex justify-center'>\n          <button class='py-2 px-4 text-white bg-gray-800 hover:bg-gray-500 w-max rounded-md'>\n            Mint\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default MintNFT\n"]},"metadata":{},"sourceType":"module"}