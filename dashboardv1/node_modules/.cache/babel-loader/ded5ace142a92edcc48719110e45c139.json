{"ast":null,"code":"var _jsxFileName = \"/home/danielo/Development/ui/dashboardV1/src/puiDeploy-updated.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { DefaultButton, PrimaryButton, DangerButton, BrandButton } from 'pivotal-ui/react/buttons';\nimport { Grid, FlexCol } from 'pivotal-ui/react/flex-grids';\nimport { Panel } from 'pivotal-ui/react/panels';\nimport { Divider } from 'pivotal-ui/react/dividers';\nimport { Image } from 'pivotal-ui/react/images';\nimport { Input } from 'pivotal-ui/react/inputs';\nimport { Modal } from 'pivotal-ui/react/modal';\nimport { Checkbox } from 'pivotal-ui/react/checkbox';\nimport { Radio, RadioGroup } from 'pivotal-ui/react/radio';\nimport { ContractFactory, ethers } from 'ethers';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport 'pivotal-ui/css/modal';\nimport moralis from \"moralis\";\nimport MOLCOMMONS_ABI from './MOLCOMMONS_ABI';\nimport MOLVAULT_BYTECODE from './MOLCOMMONS_BYTECODE';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmoralis.initialize(process.env.REACT_APP_MORALIS_APPLICATION_ID);\nmoralis.serverURL = process.env.REACT_APP_MORALIS_SERVER_URL;\nconst orgaddresses = [];\n\nfunction App() {\n  _s();\n\n  const initialUser = moralis.User.current();\n  const [user, setUser] = useState(initialUser);\n  const [clist, setList] = useState('');\n  const [address, setAddress] = useState('Connect Wallet');\n  const [chain, setChain] = useState('');\n  const [connect, toggleConnect] = useState(false); //const [organizer, setOrganizer] = useState('')\n\n  const [confirmationsRequired, setConfirmationsRequired] = useState('');\n  const [tokenName, setTokenName] = useState('');\n  const [tokenSymbol, setTokenSymbol] = useState('');\n  const [community, setCommunity] = useState('');\n  const [commons, setCommons] = useState(null);\n  const [usecase, setUseCase] = useState(null);\n  const [transferable, setTransferable] = useState(false);\n  const [deployError, setDeployError] = useState(null); // ----- Smart Contract Config\n\n  const provider = new ethers.providers.Web3Provider(window.ethereum);\n  const signer = provider.getSigner();\n  const factory = new ContractFactory(MOLCOMMONS_ABI, MOLVAULT_BYTECODE, signer);\n  const Organizer = moralis.Object.extend(\"Organizer\", {// Instance methods\n  }, {\n    newOrganizer: function (index) {\n      const organizer = new Organizer();\n      organizer.set(\"address\", document.getElementById('organizer' + index).value.toLowerCase());\n      return organizer;\n    }\n  });\n  const Commons = moralis.Object.extend(\"Commons\", {// Instance methods\n  }, {\n    newCommons: function () {\n      const commons = new Commons();\n      commons.set(\"name\", document.getElementById('commonsname').value);\n      commons.set(\"vaultsymbol\", document.getElementById('vaultsymbol').value); //tokenSymbol\n\n      commons.set(\"organizer\", document.getElementById('organizer0').value.toLowerCase());\n      commons.set(\"vaultname\", document.getElementById('vaultname').value); //tokenName\n\n      commons.set(\"confirmations\", document.getElementById('confirmations').value);\n      commons.set(\"contract\", commons);\n      commons.set(\"transferrable\", document.getElementById('transferrable').checked + '');\n      var radios = document.getElementsByName('radio-group');\n\n      for (var i = 0; i < radios.length; i++) {\n        if (radios[i].checked) {\n          commons.set(\"use\", radios[i].value);\n        }\n      }\n\n      return commons;\n    }\n  });\n  window.addEventListener('load', async function () {\n    if (user) {\n      await getNetwork();\n      setUser(user);\n      setAddress(user.get(\"ethAddress\"));\n    }\n  });\n\n  const getNetwork = () => {\n    provider.getNetwork().then(network => {\n      console.log('current chainId - ' + network.chainId);\n\n      if (network.chainId === 100) {\n        setChain('xDAI');\n        toggleConnect(true);\n      } else if (network.chainId === 4) {\n        setChain('Rinkeby');\n        toggleConnect(true);\n      } else if (network.chainId === 1) {\n        setChain('Mainnet');\n        toggleConnect(true);\n      } else if (network.chainId === 3) {\n        setChain('Ropsten');\n        toggleConnect(true);\n      } else if (network.chainId === 42) {\n        setChain('Kovan');\n        toggleConnect(true);\n      } else {\n        console.log('Pick a supported blockchain!');\n      }\n    }).catch(err => {\n      alert('err ' + err);\n      console.log(err);\n    });\n  };\n\n  const onLogin = async () => {\n    await getNetwork();\n    const user = await moralis.authenticate();\n    setUser(user);\n    setAddress(user.get(\"ethAddress\"));\n  };\n\n  const onLogout = () => {\n    moralis.User.logOut();\n    setUser(null);\n  };\n\n  const saveCommons = async () => {\n    await deploy();\n    const newCommons = Commons.newCommons();\n    await newCommons.save();\n\n    for (var i = 0; i < 10; i++) {\n      if (document.getElementById('organizer' + i) != null) {\n        const newOrganizer = Organizer.newOrganizer(i);\n        newOrganizer.set(\"parentId\", newCommons.id);\n        newOrganizer.set(\"parent\", newCommons);\n        await newCommons.save({\n          child: newOrganizer\n        });\n      }\n    }\n  };\n\n  const [orgs, setOrgs] = useState([]);\n  const [orgRows, setOrgRows] = useState();\n\n  const addOrgs = () => {\n    orgs.push(orgs.length + 1);\n    setOrgs(orgs);\n    setOrgRows(orgs.map(i => /*#__PURE__*/_jsxDEV(Grid, {\n      className: \"grid-show show-outline\",\n      children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n        fixed: true,\n        style: {\n          width: '35%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n        style: {\n          padding: '8px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Organizer\",\n          id: 'organizer' + i,\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 84\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 43\n      }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n        className: \"col-grow-2 txt-l\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 43\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 41\n    }, this)));\n  };\n\n  const setUse = useType => {\n    setUseCase(useType);\n  };\n\n  const setTransferableField = checked => {\n    setTransferable(checked);\n  }; // ----- Deploy MolVault\n\n\n  const deploy = async () => {\n    var gRoyaltiesUri = '/';\n    var organizer = [];\n\n    for (var i = 0; i < 10; i++) {\n      if (document.getElementById('organizer' + i) != null) {\n        organizer.push(document.getElementById('organizer' + i).value);\n      }\n    }\n\n    alert('orgs ' + organizer.length);\n\n    if (organizer.length > 0 && confirmationsRequired > 0) {\n      try {\n        const _contract = await factory.deploy([organizer], confirmationsRequired, tokenName, tokenSymbol, gRoyaltiesUri);\n\n        _contract.deployTransaction.wait().then(receipt => {\n          setCommons(_contract.address);\n          console.log('Receipt for deploying MolCommons', receipt);\n        }).catch(e => console.log(e));\n      } catch (e) {\n        console.log(e);\n      }\n    } else {\n      setDeployError('You must enter owners and number of confirmations');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Panel, {\n      title: 'Overview',\n      titleCols: [/*#__PURE__*/_jsxDEV(FlexCol, {\n        fixed: true,\n        children: /*#__PURE__*/_jsxDEV(PrimaryButton\n        /*onClick={onLogin}*/\n        , {\n          children: address + ' - ' + chain\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 83\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 68\n      }, this)],\n      style: {\n        padding: '8px',\n        background: '#f2f2f2'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Input\n          /*onChange={(e) => setCommunity(e.target.value)}*/\n          , {\n            placeholder: \"Commons Name\",\n            id: \"commonsname\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Organizer\",\n            id: \"organizer0\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2 txt-l\",\n          children: /*#__PURE__*/_jsxDEV(DefaultButton\n          /*onClick={addOrgs}*/\n          , {\n            children: \"Add Another Organizer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 65\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }, this), orgRows, /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            onChange: e => setTokenName(e.target.value),\n            placeholder: \"Vault Coin Name\",\n            id: \"vaultname\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 67\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Input\n          /*onChange={(e) => setTokenSymbol(e.target.value)}*/\n          , {\n            placeholder: \"Vault Coin Symbol\",\n            id: \"vaultsymbol\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 67\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Input\n          /*onChange={(e) => setConfirmationsRequired(e.target.value)}*/\n          , {\n            placeholder: \"Nbr Confrimations\",\n            id: \"confirmations\",\n            type: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(Checkbox\n          /*onChange={(e) => setTransferableField(e.target.checked)}*/\n          , {\n            id: \"transferrable\",\n            children: \"Transferrable\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pui-radio-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onCheck: () => setUse('personal'),\n              type: \"radio\",\n              value: \"Personal\",\n              name: \"radio-group\",\n              className: \"pui-radio-input\",\n              id: \"radio62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pui-radio-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"pui-radio-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 69\n              }, this), \"Personal\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              onCheck: () => setUse('community'),\n              type: \"radio\",\n              value: \"Communal\",\n              name: \"radio-group\",\n              className: \"pui-radio-input\",\n              id: \"radio63\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"pui-radio-label\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"pui-radio-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 69\n              }, this), \"Community\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: \"grid-show show-outline\",\n        children: [/*#__PURE__*/_jsxDEV(FlexCol, {\n          fixed: true,\n          style: {\n            width: '35%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          style: {\n            padding: '8px'\n          },\n          children: /*#__PURE__*/_jsxDEV(PrimaryButton\n          /*onClick={saveCommons}*/\n          , {\n            children: \"Deploy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 68\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(FlexCol, {\n          className: \"col-grow-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 25\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 21\n  }, this);\n}\n\n_s(App, \"8sSQgM/nx2vIWqVxG0/8wEkNcB0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/danielo/Development/ui/dashboardV1/src/puiDeploy-updated.js"],"names":["React","useState","ReactDOM","DefaultButton","PrimaryButton","DangerButton","BrandButton","Grid","FlexCol","Panel","Divider","Image","Input","Modal","Checkbox","Radio","RadioGroup","ContractFactory","ethers","moralis","MOLCOMMONS_ABI","MOLVAULT_BYTECODE","initialize","process","env","REACT_APP_MORALIS_APPLICATION_ID","serverURL","REACT_APP_MORALIS_SERVER_URL","orgaddresses","App","initialUser","User","current","user","setUser","clist","setList","address","setAddress","chain","setChain","connect","toggleConnect","confirmationsRequired","setConfirmationsRequired","tokenName","setTokenName","tokenSymbol","setTokenSymbol","community","setCommunity","commons","setCommons","usecase","setUseCase","transferable","setTransferable","deployError","setDeployError","provider","providers","Web3Provider","window","ethereum","signer","getSigner","factory","Organizer","Object","extend","newOrganizer","index","organizer","set","document","getElementById","value","toLowerCase","Commons","newCommons","checked","radios","getElementsByName","i","length","addEventListener","getNetwork","get","then","network","console","log","chainId","catch","err","alert","onLogin","authenticate","onLogout","logOut","saveCommons","deploy","save","id","child","orgs","setOrgs","orgRows","setOrgRows","addOrgs","push","map","style","width","padding","setUse","useType","setTransferableField","gRoyaltiesUri","_contract","deployTransaction","wait","receipt","e","title","titleCols","background","target"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {DefaultButton, PrimaryButton, DangerButton, BrandButton} from 'pivotal-ui/react/buttons';\nimport {Grid, FlexCol} from 'pivotal-ui/react/flex-grids';\nimport {Panel} from 'pivotal-ui/react/panels';\nimport {Divider} from 'pivotal-ui/react/dividers';\nimport {Image} from 'pivotal-ui/react/images';\nimport {Input} from 'pivotal-ui/react/inputs';\nimport {Modal} from 'pivotal-ui/react/modal';\nimport {Checkbox} from 'pivotal-ui/react/checkbox';\nimport {Radio, RadioGroup} from 'pivotal-ui/react/radio';\nimport { ContractFactory, ethers } from 'ethers'\n\n\nimport logo from './logo.svg';\nimport './App.css';\nimport 'pivotal-ui/css/modal';\nimport moralis from \"moralis\";\n\n\n\nimport MOLCOMMONS_ABI from './MOLCOMMONS_ABI'\nimport MOLVAULT_BYTECODE from './MOLCOMMONS_BYTECODE'\n\n\n\nmoralis.initialize(process.env.REACT_APP_MORALIS_APPLICATION_ID);\nmoralis.serverURL = process.env.REACT_APP_MORALIS_SERVER_URL;\n\nconst orgaddresses = [];\nfunction App() {\n\n        const initialUser = moralis.User.current();\n        const [user, setUser] = useState(initialUser);\n        const [clist, setList] = useState('');\n        const [address, setAddress] = useState('Connect Wallet');\n        const [chain, setChain] = useState('');\n        const [connect, toggleConnect] = useState(false);\n        //const [organizer, setOrganizer] = useState('')\n        const [confirmationsRequired, setConfirmationsRequired] = useState('')\n        const [tokenName, setTokenName] = useState('')\n        const [tokenSymbol, setTokenSymbol] = useState('')\n        const [community, setCommunity] = useState('')\n        \n        const [commons, setCommons] = useState(null)\n        const [usecase, setUseCase] = useState(null)\n        const [transferable, setTransferable] = useState(false)\n        const [deployError, setDeployError] = useState(null)\n\n\n\n  // ----- Smart Contract Config\n  const provider = new ethers.providers.Web3Provider(window.ethereum)\n\n      const signer = provider.getSigner();\n\n      const factory = new ContractFactory(MOLCOMMONS_ABI, MOLVAULT_BYTECODE, signer)\n\n        const Organizer = moralis.Object.extend( \"Organizer\", \n        {\n          // Instance methods\n\n        }, \n        {  \n            newOrganizer: function(index) { \n                                        const organizer = new Organizer();\n                                        organizer.set( \"address\",        document.getElementById( 'organizer' + index ).value.toLowerCase()  );\n                                        return organizer; \n                                    }\n        });\n\n\n\n        const Commons = moralis.Object.extend( \"Commons\", \n        {\n          // Instance methods\n\n        }, \n        {  \n            newCommons: function() { \n                                        const commons = new Commons();\n                                        commons.set( \"name\",            document.getElementById( 'commonsname'     ).value  );\n                                        commons.set( \"vaultsymbol\",     document.getElementById( 'vaultsymbol'     ).value  );//tokenSymbol\n                                        commons.set( \"organizer\",       document.getElementById( 'organizer0'      ).value.toLowerCase()  ); \n                                        commons.set( \"vaultname\",       document.getElementById( 'vaultname'       ).value  ); //tokenName\n                                        commons.set( \"confirmations\",   document.getElementById( 'confirmations'   ).value  );\n                                        commons.set( \"contract\",        commons  );\n                                        commons.set( \"transferrable\",   document.getElementById( 'transferrable'   ).checked + '' );\n                                       \n                                        var radios = document.getElementsByName( 'radio-group'   );                                 \n                                        for (var i = 0; i < radios.length; i++) \n                                        {\n                                            if ( radios[i].checked )\n                                            {\n                                               commons.set( \"use\",     radios[i].value  );\n                                            }\n                                        }\n                                        return commons; \n                                    }\n        });\n\n\n      window.addEventListener( 'load', async function() {    \n                                                               if (user) \n                                                               {\n                                                                    await getNetwork();\n                                                                    setUser(user);\n                                                                    setAddress(user.get(\"ethAddress\") ); \n                                                               }\n\n                                                        }) ;\n\n\n\nconst getNetwork = () => {\n    provider\n      .getNetwork()\n      .then((network) => {\n        console.log('current chainId - ' + network.chainId)\n        if (network.chainId === 100) {\n          setChain('xDAI')\n          toggleConnect(true)\n        } else if (network.chainId === 4) {\n          setChain('Rinkeby') \n          toggleConnect(true)\n        } else if (network.chainId === 1) {\n          setChain('Mainnet')\n          toggleConnect(true)\n        } else if (network.chainId === 3) {\n          setChain('Ropsten')\n          toggleConnect(true)\n        } else if (network.chainId === 42) {\n          setChain('Kovan')\n          toggleConnect(true)\n        } else {\n          console.log('Pick a supported blockchain!')\n        }\n      })\n      .catch((err) => {\n        alert( 'err ' + err );\n        console.log(err)\n      })\n  }\n\n       const onLogin = async () => {                                        \n                                        await getNetwork();\n                                        const user = await moralis.authenticate();\n                                        setUser(user);\n                                        setAddress(user.get(\"ethAddress\") );\n                                   };\n\n       const onLogout = () => {  moralis.User.logOut(); setUser(null); };\n\n\n       const saveCommons = async () => {    \n                                              await deploy();\n                                              const newCommons = Commons.newCommons();\n                                              await newCommons.save();  \n                                              for ( var i = 0; i < 10; i++ )\n                                              {\n                                                  \n                                                  if ( document.getElementById( 'organizer' + i ) != null )\n                                                  {\n                                                      const newOrganizer = Organizer.newOrganizer(i);\n                                                      newOrganizer.set( \"parentId\", newCommons.id   );\n                                                      newOrganizer.set( \"parent\",   newCommons      );\n                                                      await newCommons.save( {child: newOrganizer}  );\n                                                  }\n                                              }\n                                               \n                                       };\n\nconst [orgs, setOrgs] = useState([]);\n        const [orgRows, setOrgRows] = useState();\n        const addOrgs = () =>\n        {\n            orgs.push( orgs.length + 1 );\n            setOrgs(orgs);\n            setOrgRows( orgs.map(i =>     \n                                        <Grid  key={i} className=\"grid-show show-outline\">\n                                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                                          <FlexCol {...{style: {padding: '8px'}}} ><Input placeholder=\"Organizer\" id={'organizer' + i} type=\"text\"/></FlexCol>\n                                          <FlexCol className=\"col-grow-2 txt-l\"></FlexCol>\n                                        </Grid>)\n                       );\n        }\n\n    const setUse = (useType) =>\n    {\n        setUseCase( useType );\n    }\n\n    const setTransferableField = (checked) =>\n    {\n        setTransferable(checked);\n    }\n\n\n  // ----- Deploy MolVault\n  const deploy = async () => {\n    \n    var gRoyaltiesUri = '/';\n    var organizer = [];\n    for ( var i = 0; i < 10; i++ )\n    {\n        if ( document.getElementById( 'organizer' + i ) != null )\n        {    \n            organizer.push( document.getElementById( 'organizer' + i ).value );\n        }\n\n    }\n    alert( 'orgs ' + organizer.length );\n\n    if (organizer.length > 0 && confirmationsRequired > 0) {\n      try {\n        const _contract = await factory.deploy(\n          [organizer],\n          confirmationsRequired,\n          tokenName,\n          tokenSymbol,\n          gRoyaltiesUri\n        )\n\n        _contract.deployTransaction\n          .wait()\n          .then((receipt) => {\n            setCommons(_contract.address)\n\n            console.log('Receipt for deploying MolCommons', receipt)\n           \n          })\n          .catch((e) => console.log(e))\n      } catch (e) {\n        console.log(e)\n      }\n    } else {\n      setDeployError('You must enter owners and number of confirmations')\n    }\n  }\n\n        return (\n                    <div className=\"App\" >\n                        <Panel {...{title: 'Overview', titleCols: [<FlexCol fixed><PrimaryButton /*onClick={onLogin}*/ >{address + ' - ' + chain}</PrimaryButton></FlexCol>], style: {  padding: '8px', background: '#f2f2f2'}}}>\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} ><Input /*onChange={(e) => setCommunity(e.target.value)}*/ placeholder=\"Commons Name\" id=\"commonsname\" type=\"text\"/></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} ><Input placeholder=\"Organizer\" id=\"organizer0\" type=\"text\"/></FlexCol>\n                          <FlexCol className=\"col-grow-2 txt-l\"><DefaultButton /*onClick={addOrgs}*/>Add Another Organizer</DefaultButton></FlexCol>\n                        </Grid>\n\n                        {orgRows}\n                          \n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}}><Input onChange={(e) => setTokenName(e.target.value)} placeholder=\"Vault Coin Name\" id=\"vaultname\" type=\"text\"/></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}}><Input /*onChange={(e) => setTokenSymbol(e.target.value)}*/ placeholder=\"Vault Coin Symbol\" id=\"vaultsymbol\" type=\"text\"/></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} ><Input /*onChange={(e) => setConfirmationsRequired(e.target.value)}*/ placeholder=\"Nbr Confrimations\" id=\"confirmations\" type=\"text\"/></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} ><Checkbox /*onChange={(e) => setTransferableField(e.target.checked)}*/ id=\"transferrable\">Transferrable</Checkbox></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid> \n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} >\n                            <div className=\"pui-radio-group\">\n                                <input onCheck={() => setUse('personal')} type=\"radio\" value=\"Personal\" name=\"radio-group\" className=\"pui-radio-input\" id=\"radio62\" />\n                                <label className=\"pui-radio-label\" ><span className=\"pui-radio-circle\"></span>Personal</label>\n                                <input onCheck={() => setUse('community')} type=\"radio\" value=\"Communal\" name=\"radio-group\" className=\"pui-radio-input\" id=\"radio63\" />\n                                <label className=\"pui-radio-label\" ><span className=\"pui-radio-circle\"></span>Community</label>\n                            </div>\n                        </FlexCol>\n                        <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n                        <Grid className=\"grid-show show-outline\">\n                          <FlexCol fixed {...{style: {width: '35%'}}}/>\n                          <FlexCol {...{style: {padding: '8px'}}} ><PrimaryButton /*onClick={saveCommons}*/ >Deploy</PrimaryButton></FlexCol>\n                          <FlexCol className=\"col-grow-2\"/>\n                        </Grid>\n                      </Panel>\n                    </div>\n               );\n\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}